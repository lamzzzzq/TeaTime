# Convai Web v3 å®Œæ•´éƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²é€‰é¡¹æ¦‚è§ˆ

æ‚¨å¯ä»¥é€‰æ‹©ä»¥ä¸‹å‡ ç§éƒ¨ç½²æ–¹å¼ï¼š

1. **ğŸ”¥ æ¨èï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²** - é€‚åˆæ­£å¼ä½¿ç”¨ï¼Œå…¶ä»–äººå¯ä»¥é€šè¿‡é“¾æ¥è®¿é—®
2. **ğŸ³ Docker éƒ¨ç½²** - ç®€å•å¿«æ·ï¼Œé€‚åˆæœ‰Dockerç¯å¢ƒçš„ç”¨æˆ·
3. **ğŸ’» æœ¬åœ°éƒ¨ç½²** - é€‚åˆå¼€å‘å’Œæµ‹è¯•

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- Node.js 16+ 
- npm 8+
- Gitï¼ˆç”¨äºä»£ç ç®¡ç†ï¼‰
- Dockerï¼ˆå¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²ï¼‰

### æ£€æŸ¥ç¯å¢ƒ
```bash
node --version    # åº”è¯¥ >= 16.0.0
npm --version     # åº”è¯¥ >= 8.0.0
```

## ğŸš€ æ–¹å¼ä¸€ï¼šäº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

### 1. å‡†å¤‡äº‘æœåŠ¡å™¨

**æ¨èçš„äº‘æœåŠ¡å¹³å°ï¼š**
- **é˜¿é‡Œäº‘ECS** - å›½å†…è®¿é—®é€Ÿåº¦å¿«
- **è…¾è®¯äº‘CVM** - æ€§ä»·æ¯”é«˜
- **AWS EC2** - å›½é™…åŒ–é€‰æ‹©
- **Vultr/DigitalOcean** - ç®€å•æ˜“ç”¨

**æœåŠ¡å™¨é…ç½®å»ºè®®ï¼š**
- CPU: 1æ ¸å¿ƒä»¥ä¸Š
- å†…å­˜: 1GBä»¥ä¸Š
- å­˜å‚¨: 20GBä»¥ä¸Š
- æ“ä½œç³»ç»Ÿ: Ubuntu 20.04+ / CentOS 8+

### 2. æœåŠ¡å™¨åˆå§‹è®¾ç½®

```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£… Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# å®‰è£… PM2ï¼ˆè¿›ç¨‹ç®¡ç†å™¨ï¼‰
sudo npm install -g pm2

# å®‰è£… Nginxï¼ˆå¯é€‰ï¼Œç”¨äºåå‘ä»£ç†ï¼‰
sudo apt install nginx -y
```

### 3. éƒ¨ç½²é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨
git clone https://github.com/your-username/ConvaiWeb_v3.git
cd ConvaiWeb_v3

# ä½¿ç”¨è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
chmod +x scripts/deploy.sh
./scripts/deploy.sh local

# æˆ–è€…æ‰‹åŠ¨éƒ¨ç½²
cd backend && npm install
cd ../frontend && npm install && npm run build
cd ../backend && cp -r ../frontend/build public

# ä½¿ç”¨ PM2 å¯åŠ¨æœåŠ¡
pm2 start server.js --name convai-web
pm2 startup
pm2 save
```

### 4. é…ç½®é˜²ç«å¢™å’ŒåŸŸå

```bash
# å¼€æ”¾ç«¯å£ 3000
sudo ufw allow 3000
sudo ufw enable

# å¦‚æœä½¿ç”¨ Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰
sudo ufw allow 'Nginx Full'
```

**Nginx é…ç½®ç¤ºä¾‹ï¼š**
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### 5. è®¿é—®æ‚¨çš„åº”ç”¨

- **ç›´æ¥è®¿é—®**: `http://ä½ çš„æœåŠ¡å™¨IP:3000`
- **ä½¿ç”¨åŸŸå**: `http://your-domain.com` (å¦‚æœé…ç½®äº†Nginx)

## ğŸ³ æ–¹å¼äºŒï¼šDocker éƒ¨ç½²

### 1. å®‰è£… Docker

```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# å¯åŠ¨ Docker
sudo systemctl start docker
sudo systemctl enable docker
```

### 2. æ„å»ºå’Œè¿è¡Œ

```bash
# ä½¿ç”¨è‡ªåŠ¨è„šæœ¬
./scripts/deploy.sh docker

# æˆ–è€…æ‰‹åŠ¨æ“ä½œ
docker build -t convai-web-v3 .
docker run -d -p 3000:3000 --name convai-web --restart unless-stopped convai-web-v3
```

### 3. ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

## ğŸ’» æ–¹å¼ä¸‰ï¼šæœ¬åœ°éƒ¨ç½²

### Windows ç”¨æˆ·

```cmd
# è¿è¡Œéƒ¨ç½²è„šæœ¬
scripts\deploy.bat

# æˆ–è€…æ‰‹åŠ¨æ“ä½œ
cd backend
npm install
cd ..\frontend
npm install
npm run build
cd ..\backend
xcopy "..\frontend\build" "public" /E /I /Y
npm start
```

### Linux/Mac ç”¨æˆ·

```bash
# è¿è¡Œéƒ¨ç½²è„šæœ¬
chmod +x scripts/deploy.sh
./scripts/deploy.sh local

# æˆ–è€…æ‰‹åŠ¨æ“ä½œ
cd backend && npm install
cd ../frontend && npm install && npm run build
cd ../backend && cp -r ../frontend/build public
npm start
```

## ğŸŒ å…è´¹äº‘å¹³å°éƒ¨ç½²

### Vercel + Railway ç»„åˆï¼ˆæ¨èï¼‰

**å‰ç«¯éƒ¨ç½²åˆ° Vercelï¼š**
1. æ³¨å†Œ [Vercel](https://vercel.com)
2. è¿æ¥ GitHub ä»“åº“
3. è®¾ç½®æ„å»ºé…ç½®ï¼š
   - Framework: React
   - Root Directory: `frontend`
   - Build Command: `npm run build`
   - Output Directory: `build`

**åç«¯éƒ¨ç½²åˆ° Railwayï¼š**
1. æ³¨å†Œ [Railway](https://railway.app)
2. è¿æ¥ GitHub ä»“åº“
3. è®¾ç½®é…ç½®ï¼š
   - Root Directory: `backend`
   - Start Command: `npm start`
   - ç¯å¢ƒå˜é‡: `PORT=3000`

### Netlify + Heroku ç»„åˆ

**å‰ç«¯éƒ¨ç½²åˆ° Netlifyï¼š**
1. æ³¨å†Œ [Netlify](https://netlify.com)
2. è¿æ¥ GitHub ä»“åº“
3. è®¾ç½®æ„å»ºï¼š
   - Base directory: `frontend`
   - Build command: `npm run build`
   - Publish directory: `frontend/build`

**åç«¯éƒ¨ç½²åˆ° Herokuï¼š**
1. æ³¨å†Œ [Heroku](https://heroku.com)
2. å®‰è£… Heroku CLI
3. éƒ¨ç½²å‘½ä»¤ï¼š
```bash
# åœ¨åç«¯ç›®å½•
heroku create your-app-name
git subtree push --prefix backend heroku main
```

## âš™ï¸ ç¯å¢ƒé…ç½®

### åç«¯ç¯å¢ƒå˜é‡ (env.example)
```bash
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
CORS_ORIGIN=https://your-frontend-domain.com
```

### å‰ç«¯ç¯å¢ƒå˜é‡ (frontend/env.example)
```bash
REACT_APP_API_URL=https://your-backend-domain.com
REACT_APP_TITLE=Convai Web Chat
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### Q1: Unity WebGL æ–‡ä»¶åŠ è½½å¤±è´¥
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ Unity æ„å»ºæ–‡ä»¶æ˜¯å¦å®Œæ•´
- ç¡®è®¤æœåŠ¡å™¨ MIME ç±»å‹é…ç½®æ­£ç¡®
- æ£€æŸ¥ CORS è®¾ç½®

### Q2: å‰åç«¯é€šä¿¡å¤±è´¥
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ API_URL é…ç½®
- ç¡®è®¤ CORS_ORIGIN è®¾ç½®
- æ£€æŸ¥é˜²ç«å¢™ç«¯å£å¼€æ”¾

### Q3: éƒ¨ç½²åæ€§èƒ½é—®é¢˜
**è§£å†³æ–¹æ¡ˆï¼š**
- å¯ç”¨ Nginx gzip å‹ç¼©
- é…ç½®é™æ€æ–‡ä»¶ç¼“å­˜
- ä½¿ç”¨ CDN åŠ é€Ÿ

### Q4: SSL/HTTPS é…ç½®
**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### å¥åº·æ£€æŸ¥
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://your-domain.com/api/health

# PM2 ç›‘æ§
pm2 status
pm2 logs convai-web
```

### æ—¥å¿—ç®¡ç†
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs convai-web --lines 100

# æ¸…ç†æ—§æ—¥å¿—
pm2 flush
```

### è‡ªåŠ¨å¤‡ä»½è„šæœ¬
```bash
#!/bin/bash
# backup.sh
DATE=$(date +%Y%m%d_%H%M%S)
tar -czf "backup_$DATE.tar.gz" ConvaiWeb_v3/
```

## ğŸ‰ éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
- [ ] åº”ç”¨å¯ä»¥é€šè¿‡é“¾æ¥è®¿é—®
- [ ] Unity WebGL æ­£å¸¸åŠ è½½
- [ ] èŠå¤©åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] API æ¥å£å“åº”æ­£å¸¸
- [ ] é˜²ç«å¢™é…ç½®æ­£ç¡®
- [ ] åŸŸåè§£ææ­£ç¡®ï¼ˆå¦‚æœä½¿ç”¨åŸŸåï¼‰
- [ ] SSL è¯ä¹¦é…ç½®ï¼ˆå¦‚æœéœ€è¦ HTTPSï¼‰
- [ ] ç›‘æ§å’Œæ—¥å¿—é…ç½®å®Œæˆ

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ `DEPLOYMENT_INFO.md` æ–‡ä»¶
2. æ£€æŸ¥åº”ç”¨æ—¥å¿—
3. è®¿é—® `/api/health` ç«¯ç‚¹æ£€æŸ¥çŠ¶æ€
4. å‚è€ƒé¡¹ç›® README.md

---

**ğŸŠ æ­å–œï¼æ‚¨çš„ Convai Web v3 åº”ç”¨ç°åœ¨å¯ä»¥é€šè¿‡é“¾æ¥è®¿é—®äº†ï¼**
